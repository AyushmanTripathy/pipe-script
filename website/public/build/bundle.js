var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function s(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function a(t,e,n){t.$$.on_destroy.push(c(e,n))}function l(t,e,n,r){if(t){const o=u(t,e,n,r);return t[0](o)}}function u(t,n,r,o){return t[1]&&o?e(r.ctx.slice(),t[1](o(n))):r.ctx}function f(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function p(t,e,n,r,o,s){if(o){const i=u(e,n,r,s);t.p(i,o)}}function d(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function h(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function g(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function m(e){return e&&s(e.destroy)?e.destroy:t}let $,b=!1;function y(t,e,n,r){for(;t<e;){const o=t+(e-t>>1);n(o)<=r?t=o+1:e=o}return t}function v(t,e){if(b){for(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if("HEAD"===t.nodeName){const t=[];for(let n=0;n<e.length;n++){const r=e[n];void 0!==r.claim_order&&t.push(r)}e=t}const n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let o=0;for(let t=0;t<e.length;t++){const s=e[t].claim_order,i=(o>0&&e[n[o]].claim_order<=s?o+1:y(1,o,(t=>e[n[t]].claim_order),s))-1;r[t]=n[i]+1;const c=i+1;n[c]=t,o=Math.max(c,o)}const s=[],i=[];let c=e.length-1;for(let t=n[o]+1;0!=t;t=r[t-1]){for(s.push(e[t-1]);c>=t;c--)i.push(e[c]);c--}for(;c>=0;c--)i.push(e[c]);s.reverse(),i.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<i.length;e++){for(;n<s.length&&i[e].claim_order>=s[n].claim_order;)n++;const r=n<s.length?s[n]:null;t.insertBefore(i[e],r)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);null!==t.actual_end_child&&void 0===t.actual_end_child.claim_order;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?void 0===e.claim_order&&e.parentNode===t||t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else e.parentNode===t&&null===e.nextSibling||t.appendChild(e)}function _(t,e,n){b&&!n?v(t,e):e.parentNode===t&&e.nextSibling==n||t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function E(){return k(" ")}function N(){return k("")}function T(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function W(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t){return Array.from(t.childNodes)}function A(t,e,n,r,o=!1){!function(t){void 0===t.claim_info&&(t.claim_info={last_index:0,total_claimed:0})}(t);const s=(()=>{for(let r=t.claim_info.last_index;r<t.length;r++){const s=t[r];if(e(s)){const e=n(s);return void 0===e?t.splice(r,1):t[r]=e,o||(t.claim_info.last_index=r),s}}for(let r=t.claim_info.last_index-1;r>=0;r--){const s=t[r];if(e(s)){const e=n(s);return void 0===e?t.splice(r,1):t[r]=e,o?void 0===e&&t.claim_info.last_index--:t.claim_info.last_index=r,s}}return r()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function S(t,e,n){return function(t,e,n,r){return A(t,(t=>t.nodeName===e),(t=>{const e=[];for(let r=0;r<t.attributes.length;r++){const o=t.attributes[r];n[o.name]||e.push(o.name)}e.forEach((e=>t.removeAttribute(e)))}),(()=>r(e)))}(t,e,n,w)}function C(t,e){return A(t,(t=>3===t.nodeType),(t=>{const n=""+e;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n}),(()=>k(e)),!0)}function M(t){return C(t," ")}function R(t,e){t.value=null==e?"":e}function j(t){$=t}function I(){if(!$)throw new Error("Function called outside component initialization");return $}function L(t,e){I().$$.context.set(t,e)}function P(t){return I().$$.context.get(t)}const B=[],D=[],H=[],K=[],q=Promise.resolve();let z=!1;function U(t){H.push(t)}let V=!1;const X=new Set;function F(){if(!V){V=!0;do{for(let t=0;t<B.length;t+=1){const e=B[t];j(e),J(e.$$)}for(j(null),B.length=0;D.length;)D.pop()();for(let t=0;t<H.length;t+=1){const e=H[t];X.has(e)||(X.add(e),e())}H.length=0}while(B.length);for(;K.length;)K.pop()();z=!1,V=!1,X.clear()}}function J(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const Y=new Set;let Z;function G(){Z={r:0,c:[],p:Z}}function Q(){Z.r||o(Z.c),Z=Z.p}function tt(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(Y.has(t))return;Y.add(t),Z.c.push((()=>{Y.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function nt(t){return"object"==typeof t&&null!==t?t:{}}function rt(t){t&&t.c()}function ot(t,e){t&&t.l(e)}function st(t,e,r,i){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(e,r),i||U((()=>{const e=a.map(n).filter(s);l?l.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(U)}function it(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){-1===t.$$.dirty[0]&&(B.push(t),z||(z=!0,q.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(e,n,s,i,c,a,l,u=[-1]){const f=$;j(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:n.context||[]),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};l&&l(p.root);let d=!1;if(p.ctx=s?s(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),d&&ct(e,t)),n})):[],p.update(),d=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){b=!0;const t=O(n.target);p.fragment&&p.fragment.l(t),t.forEach(x)}else p.fragment&&p.fragment.c();n.intro&&tt(e.$$.fragment),st(e,n.target,n.anchor,n.customElement),b=!1,F()}j(f)}class lt{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function ft(e,n=t){let r;const o=new Set;function s(t){if(i(e,t)&&(e=t,r)){const t=!ut.length;for(const t of o)t[1](),ut.push(t,e);if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,c=t){const a=[i,c];return o.add(a),1===o.size&&(r=n(s)||t),i(e),()=>{o.delete(a),0===o.size&&(r(),r=null)}}}}function pt(e,n,r){const i=!Array.isArray(e),a=i?[e]:e,l=n.length<2;return function(t,e){return{subscribe:ft(t,e).subscribe}}(r,(e=>{let r=!1;const u=[];let f=0,p=t;const d=()=>{if(f)return;p();const r=n(i?u[0]:u,e);l?e(r):p=s(r)?r:t},h=a.map(((t,e)=>c(t,(t=>{u[e]=t,f&=~(1<<e),r&&d()}),(()=>{f|=1<<e}))));return r=!0,d(),function(){o(h),p()}}))}const dt={},ht={};function gt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const mt=function(t,e){const n=[];let r=gt(t);return{get location(){return r},listen(e){n.push(e);const o=()=>{r=gt(t),e({location:r,action:"POP"})};return t.addEventListener("popstate",o),()=>{t.removeEventListener("popstate",o);const r=n.indexOf(e);n.splice(r,1)}},navigate(e,{state:o,replace:s=!1}={}){o={...o,key:Date.now()+""};try{s?t.history.replaceState(o,null,e):t.history.pushState(o,null,e)}catch(n){t.location[s?"replace":"assign"](e)}r=gt(t),n.forEach((t=>t({location:r,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const n=[{pathname:t,search:""}],r=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return r[e]},pushState(t,o,s){const[i,c=""]=s.split("?");e++,n.push({pathname:i,search:c}),r.push(t)},replaceState(t,o,s){const[i,c=""]=s.split("?");n[e]={pathname:i,search:c},r[e]=t}}}}()),{navigate:$t}=mt,bt=/^:(.+)/;function yt(t){return"*"===t[0]}function vt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function _t(t){return t.replace(/(^\/+|\/+$)/g,"")}function xt(t,e){return{route:t,score:t.default?0:vt(t.path).reduce(((t,e)=>(t+=4,!function(t){return""===t}(e)?!function(t){return bt.test(t)}(e)?yt(e)?t-=5:t+=3:t+=2:t+=1,t)),0),index:e}}function wt(t,e){let n,r;const[o]=e.split("?"),s=vt(o),i=""===s[0],c=function(t){return t.map(xt).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,o=c.length;t<o;t++){const o=c[t].route;let a=!1;if(o.default){r={route:o,params:{},uri:e};continue}const l=vt(o.path),u={},f=Math.max(s.length,l.length);let p=0;for(;p<f;p++){const t=l[p],e=s[p];if(void 0!==t&&yt(t)){u["*"===t?"*":t.slice(1)]=s.slice(p).map(decodeURIComponent).join("/");break}if(void 0===e){a=!0;break}let n=bt.exec(t);if(n&&!i){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){a=!0;break}}if(!a){n={route:o,params:u,uri:"/"+s.slice(0,p).join("/")};break}}return n||r||null}function kt(t,e){return`${_t("/"===e?t:`${_t(t)}/${_t(e)}`)}/`}function Et(t){let e;const n=t[9].default,r=l(n,t,t[8],null);return{c(){r&&r.c()},l(t){r&&r.l(t)},m(t,n){r&&r.m(t,n),e=!0},p(t,[o]){r&&r.p&&(!e||256&o)&&p(r,n,t,t[8],e?f(n,t[8],o,null):d(t[8]),null)},i(t){e||(tt(r,t),e=!0)},o(t){et(r,t),e=!1},d(t){r&&r.d(t)}}}function Nt(t,e,n){let r,o,s,{$$slots:i={},$$scope:c}=e,{basepath:l="/"}=e,{url:u=null}=e;const f=P(dt),p=P(ht),d=ft([]);a(t,d,(t=>n(6,o=t)));const h=ft(null);let g=!1;const m=f||ft(u?{pathname:u}:mt.location);a(t,m,(t=>n(5,r=t)));const $=p?p.routerBase:ft({path:l,uri:l});a(t,$,(t=>n(7,s=t)));const b=pt([$,h],(([t,e])=>{if(null===e)return t;const{path:n}=t,{route:r,uri:o}=e;return{path:r.default?n:r.path.replace(/\*.*$/,""),uri:o}}));var y;return f||(y=()=>mt.listen((t=>{m.set(t.location)})),I().$$.on_mount.push(y),L(dt,m)),L(ht,{activeRoute:h,base:$,routerBase:b,registerRoute:function(t){const{path:e}=s;let{path:n}=t;if(t._path=n,t.path=kt(e,n),"undefined"==typeof window){if(g)return;const e=function(t,e){return wt([t],e)}(t,r.pathname);e&&(h.set(e),g=!0)}else d.update((e=>(e.push(t),e)))},unregisterRoute:function(t){d.update((e=>{const n=e.indexOf(t);return e.splice(n,1),e}))}}),t.$$set=t=>{"basepath"in t&&n(3,l=t.basepath),"url"in t&&n(4,u=t.url),"$$scope"in t&&n(8,c=t.$$scope)},t.$$.update=()=>{if(128&t.$$.dirty){const{path:t}=s;d.update((e=>(e.forEach((e=>e.path=kt(t,e._path))),e)))}if(96&t.$$.dirty){const t=wt(o,r.pathname);h.set(t)}},[d,m,$,l,u,r,o,s,c,i]}class Tt extends lt{constructor(t){super(),at(this,t,Nt,Et,i,{basepath:3,url:4})}}const Wt=t=>({params:4&t,location:16&t}),Ot=t=>({params:t[2],location:t[4]});function At(t){let e,n,r,o;const s=[Ct,St],i=[];function c(t,e){return null!==t[0]?0:1}return e=c(t),n=i[e]=s[e](t),{c(){n.c(),r=N()},l(t){n.l(t),r=N()},m(t,n){i[e].m(t,n),_(t,r,n),o=!0},p(t,o){let a=e;e=c(t),e===a?i[e].p(t,o):(G(),et(i[a],1,1,(()=>{i[a]=null})),Q(),n=i[e],n?n.p(t,o):(n=i[e]=s[e](t),n.c()),tt(n,1),n.m(r.parentNode,r))},i(t){o||(tt(n),o=!0)},o(t){et(n),o=!1},d(t){i[e].d(t),t&&x(r)}}}function St(t){let e;const n=t[10].default,r=l(n,t,t[9],Ot);return{c(){r&&r.c()},l(t){r&&r.l(t)},m(t,n){r&&r.m(t,n),e=!0},p(t,o){r&&r.p&&(!e||532&o)&&p(r,n,t,t[9],e?f(n,t[9],o,Wt):d(t[9]),Ot)},i(t){e||(tt(r,t),e=!0)},o(t){et(r,t),e=!1},d(t){r&&r.d(t)}}}function Ct(t){let n,r,o;const s=[{location:t[4]},t[2],t[3]];var i=t[0];function c(t){let n={};for(let t=0;t<s.length;t+=1)n=e(n,s[t]);return{props:n}}return i&&(n=new i(c())),{c(){n&&rt(n.$$.fragment),r=N()},l(t){n&&ot(n.$$.fragment,t),r=N()},m(t,e){n&&st(n,t,e),_(t,r,e),o=!0},p(t,e){const o=28&e?function(t,e){const n={},r={},o={$$scope:1};let s=t.length;for(;s--;){const i=t[s],c=e[s];if(c){for(const t in i)t in c||(r[t]=1);for(const t in c)o[t]||(n[t]=c[t],o[t]=1);t[s]=c}else for(const t in i)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(s,[16&e&&{location:t[4]},4&e&&nt(t[2]),8&e&&nt(t[3])]):{};if(i!==(i=t[0])){if(n){G();const t=n;et(t.$$.fragment,1,0,(()=>{it(t,1)})),Q()}i?(n=new i(c()),rt(n.$$.fragment),tt(n.$$.fragment,1),st(n,r.parentNode,r)):n=null}else i&&n.$set(o)},i(t){o||(n&&tt(n.$$.fragment,t),o=!0)},o(t){n&&et(n.$$.fragment,t),o=!1},d(t){t&&x(r),n&&it(n,t)}}}function Mt(t){let e,n,r=null!==t[1]&&t[1].route===t[7]&&At(t);return{c(){r&&r.c(),e=N()},l(t){r&&r.l(t),e=N()},m(t,o){r&&r.m(t,o),_(t,e,o),n=!0},p(t,[n]){null!==t[1]&&t[1].route===t[7]?r?(r.p(t,n),2&n&&tt(r,1)):(r=At(t),r.c(),tt(r,1),r.m(e.parentNode,e)):r&&(G(),et(r,1,1,(()=>{r=null})),Q())},i(t){n||(tt(r),n=!0)},o(t){et(r),n=!1},d(t){r&&r.d(t),t&&x(e)}}}function Rt(t,n,r){let o,s,{$$slots:i={},$$scope:c}=n,{path:l=""}=n,{component:u=null}=n;const{registerRoute:f,unregisterRoute:p,activeRoute:d}=P(ht);a(t,d,(t=>r(1,o=t)));const g=P(dt);a(t,g,(t=>r(4,s=t)));const m={path:l,default:""===l};let $={},b={};var y;return f(m),"undefined"!=typeof window&&(y=()=>{p(m)},I().$$.on_destroy.push(y)),t.$$set=t=>{r(13,n=e(e({},n),h(t))),"path"in t&&r(8,l=t.path),"component"in t&&r(0,u=t.component),"$$scope"in t&&r(9,c=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&o&&o.route===m&&r(2,$=o.params);{const{path:t,component:e,...o}=n;r(3,b=o)}},n=h(n),[u,o,$,b,s,d,g,m,l,c,i]}class jt extends lt{constructor(t){super(),at(this,t,Rt,Mt,i,{path:8,component:0})}}function It(t){function e(t){const e=t.currentTarget;""===e.target&&function(t){const e=location.host;return t.host==e||0===t.href.indexOf(`https://${e}`)||0===t.href.indexOf(`http://${e}`)}(e)&&function(t){return!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)&&(t.preventDefault(),$t(e.pathname+e.search,{replace:e.hasAttribute("replace")}))}return t.addEventListener("click",e),{destroy(){t.removeEventListener("click",e)}}}function Lt(t,e,n){switch(typeof t){case"string":const r=function(t){if(0==t)return 0;if(Number(t))return Number(t);if("true"==t)return!0;if("false"==t)return!1;if("null"==t)return null;if("string"!=typeof t)return t;t.startsWith("%string")&&(t=t.split("%"),t=scopes[t[1]][t[2]]);return t}(function(t,e){t.startsWith("-$")&&(t=t.substring(1));if(t.startsWith("$"))return e.hasOwnProperty(t.substring(1))?e[t.substring(1)]:scopes.vars[t.substring(1)];return t}(t,e));return t.startsWith("-$")?-1*r:r;case"undefined":return error(`${n} is undefined`);case"NaN":return error("detected NaN value");default:return t}}function Pt(t){return t.split(" ").join("[s]")}function Bt(t){return t=t.split("%"),scopes[t[1]][t[2]]}function Dt(t){return"string"==typeof t&&t.startsWith("%")}function Ht(t){return Number(t)||0==t}function Kt(){return hash_code++,`@${hash_code}`}function qt(t){return t[t.length-1]}function zt(t,e={}){if(!t)return error("invalid scope");t=t.slice();for(let n of t)if(n.startsWith("@")){const t=Ut(n,e);if(t.returned||t.breaked)return t}else{if(n.startsWith("break"))return{breaked:!0};const t=Vt(n,e);if(n.startsWith("return"))return{returned:!0,value:Lt(t,e)}}return{}}function Ut(t,e){const n=globalThis.scopes[t][0];return n.startsWith("while")?function(t,e){let n=scopes[t].slice();n=n.shift()+" ",n="boolean"+n.slice(5,-1);let r=config.max_loop_limit;for(;Vt(n,e);){const{breaked:n,returned:o,value:s}=zt(scopes[t].slice(1),e);if(n)break;if(o)return{returned:o,value:s};if(!r)return error("Maximum loop limit reached");r--}return{}}(t,e):n.startsWith("loop")?function(t,e){let n=scopes[t].slice();n=n.shift()+" ",n=Vt("number "+n.slice(4,-1).trim(),e);let r=config.max_loop_limit;for(;n>0;){const{breaked:o,returned:s,value:i}=zt(scopes[t].slice(1),e);if(o)break;if(s)return{returned:s,value:i};if(n--,!r)return error("Maximum loop limit reached");r--}return{}}(t,e):n.startsWith("if")?function(t,e){const n=scopes[t].slice();let r;const o=n.length/2;for(const t of new Array(o)){let t=n.shift();if(t+=" ",t.startsWith("if")){if(t="boolean "+t.slice(2,-1),Vt(t,e)){r=n.shift();break}}else if(t.startsWith("elseif")){if(t="boolean "+t.slice(6,-1),Vt(t,e)){r=n.shift();break}}else{if(t.startsWith("else")){r=n.shift();break}error(`invalid if block \n${t}`)}n.shift()}return r?zt(scopes[r],e):{}}(t,e):n.startsWith("try")?function(t,e){const n=scopes[t].slice();let r;try{r=zt(scopes[n[1]],e)}catch(t){let o=n[2].split(" ")[1];o&&Gt(o.substring(1),Pt(t),e),r=zt(scopes[n[3]],e)}return r}(t,e):n.startsWith("switch")?function(t,e){const n=scopes[t],r=Vt("pass_input "+n.shift().slice(6),e);let o={};for(let t=0;t<n.length;t++){if(n[t].startsWith("default"))t++,o=zt(scopes[n[t]],e);else if(n[t].startsWith("case")){const s=Vt("pass_input "+n[t].slice(4),e);t++,Lt(r,e)==Lt(s,e)&&(o=zt(scopes[n[t]],e))}else error(`invalid keyword ${n[t]} in switch block`);if(o.breaked)return{value:null};if(o.returned)return o}return{}}(t,e):n.startsWith("foreach")?function(t,e){const n=scopes[t].slice();let r=n.shift().split(" "),o=r[1].slice(1);r=Vt("pass_input "+r.splice(2).join(" "),e),Dt(r)&&(r=Bt(r));if("object"==typeof r)for(const t in r){e[o]=r[t];const{breaked:s,returned:i,value:c}=zt(n,e);if(s)break;if(i)return{returned:i,value:c}}else error(`${r} is not iterable`);return{}}(t,e):(error(`invalid block ${n}`),{})}function Vt(t,e){t=(t=Xt(t,e)).split("|").filter(Boolean).reverse();let n=null;for(let r of t)r=r.split(" ").filter(Boolean),null!=n&&r.push(n),n=Ft(e,r);return n}function Xt(t,e,n=[]){if(!t.includes("<")&&!t.includes(">"))return t;let r=0;for(const o of t){if("<"==o)n.push(r);else if(">"==o){const o=n.pop();if((t=t.slice(0,o)+Vt(t.slice(o+1,r),e)+t.slice(r+1,t.length)).includes(">")){t=Xt(t,e,n);break}break}r++}return t}function Ft(t,e){const n=e.shift(),r=e.slice();switch(n){case"break":return"break";case"return":return e[0];case"pass_input":return Lt(e[0],t)}switch(n){case"exit":process.exit();case"random":return Math.random()}switch(n){case"log":return log(e.reduce(((e,n)=>e+function(t,e){Dt(t=Lt(t,e))&&(t=Bt(t));return function(t){return"string"!=typeof t?t:t=t.split("[s]").join(" ")}(t)}(n,t)),"")),null;case"add":let n=0;return e.some((e=>"number"!=typeof Lt(e,t)))&&(n=""),e.reduce(((e,n)=>e+Lt(n,t)),n);case"multiply":return e.reduce(((e,n)=>e*Lt(n,t)),1);case"divide":return e.reduce(((e,n)=>e/Lt(n,t)),1)}const o=Qt(e.shift(),n,t,r);switch(n){case"get":return Yt(o,e,t);case"boolean":return Boolean(o);case"neg":return-1*o;case"number":return Number(o);case"not":return!Boolean(o);case"call":const n=[];for(const r of e)n.push(Lt(r,t));return function(t,e){if(config.maximum_call_stack--,!config.maximum_call_stack)return error("maximum call stack exceded");if(!globalThis.scopes.hasOwnProperty(t))return error(`${t} is not a function`);const n=globalThis.scopes[t].slice();let r=n.shift().split(" ").filter(Boolean);r=r.splice(2);const o={};for(const t of r)o[t.substring(1)]=e.shift();const s=zt(n,o);return s.breaked&&error(`invalid break statment in function ${t}`),s}(o,n).value;case"round":return Math.round(o);case"floor":return Math.floor(o);case"new":return function(t){const e=Kt();switch(t){case"Object":return scopes.object[e]={},`%object%${e}`;case"Array":return scopes.array[e]=[],`%array%${e}`;default:return error(`${t} is not a constructor`)}}(o);case"pop":return Jt(o,r[0]).pop();case"shift":return Jt(o,r[0]).shift();case"length":return Jt(o,r[0]).length;case"reverse":return function(t,e){const n=Kt();return t=t.split("%"),scopes[t[1]][n]=e,`%${t[1]}%${n}`}(o,[...Jt(o,r[0]).reverse()]);case"last":return qt(Jt(o,r[0]))}const s=Qt(e.shift(),n,t,r);switch(n){case"set":return Ht(o)?error(`cannot set value to Number ${r[0]}`):(Dt(o)?Zt(o,s,Lt(e.pop()),e,t):Gt(o,s,t),null);case"pow":return sum=o,Math.pow(o,s);case"reminder":return o%s;case"push":return Jt(o,r[0]).push(s),null;case"unshift":return Jt(o,r[0]).unshift(s),null;case"includes":return Jt(o,r[0]).includes(s);case"eq":return o==s;case"gt":return o>s;case"lt":return o<s;case"ge":return o>=s;case"le":return o<=s}error(`invalid command or arg - ${n} with arg ${[...r]}`)}function Jt(t,e){return Ht(t)?error(`${e} is not a array`):t.startsWith("%array")?Bt(t):error(`${e} is not a array`)}function Yt(t,e,n){if(Ht(t)||!t.startsWith("%"))return error(`expected refrence type got primitive ${t}`);t=t.split("%");let r=scopes[t[1]];e=e.map((t=>Lt(t,n)));let o=t[2];for(let t=0;t<e.length;t++){if("string"==typeof r[o]&&r[o].startsWith("%"))return Yt(r[o],e.slice(t),n);if(r=r[o],void 0===r)return error(`cannot get proprety ${e[t]} of ${r}`);o=e[t]}return r[o]}function Zt(t,e,n,r,o){switch((t=t.split("%"))[1]){case"array":if(!Ht(e))return error(`expected index to be a number , got ${e}`);break;case"object":if(Ht(e))return error(`expected key to be string , got ${e}`);break;case"string":return error(`cannot change ${e} of read only strings`)}let s=scopes[t[1]];r=[e,...r].map((t=>Lt(t,o))),e=t[2];for(let t=0;t<r.length;t++){if("string"==typeof s[e]&&s[e].startsWith("%"))return Zt(s[e],r[t],n,r.slice(t+1),o);if(s=s[e],void 0===s)return error(`cannot set proprety ${r[t]} of ${s}`);e=r[t]}s[e]=n}function Gt(t,e,n){n.hasOwnProperty(t)?n[t]=e:scopes.vars[t]=e}function Qt(t,e,n,r){if(void 0!==t)return Lt(t,n);error(`invalid command - ${e} with arg ${r}`)}function te(t){let e=0,n=!1,r=0;for(const o of t){if("'"==o){if(n){const n=Kt();let o=t.slice(0,e);return o+=`%string%${n}`,o+=t.slice(r+1,t.length),scopes.string[n]=Pt(t.slice(e+1,r)),te(o)}e=r,n=!n}r++}return t}function ee(t){return"\t"==config.tab?function(t){let e=0;for(;t.startsWith("\t");)e++,t=t.substring(1);return e}(t):function(t){let e=0;for(;t.startsWith(" ");)e++,t=t.substring(1);return Math.floor(e/config.tab)}(t)}const ne=ft("");async function re(t){ne.set(""),globalThis.scopes={},globalThis.hash_code=0,scopes.global=[],scopes.vars={},scopes.object={},scopes.array={},scopes.string={};try{await async function(t,e){let n,r=["global"],o=0,s=!1,i=[],c=!1;for(let a of t){const t=ee(a);if(a.includes("#")&&(a.includes("##")&&(s=!s),a=a.split("#")[0]),a=te(a),a=a.replace("[","<").replace("]",">"),a=a.trim(),s);else if(a){if(a.startsWith("import "))await e(a.slice(6));else if(o==t)scopes[qt(r)].push(a);else if(o>t){for(const e of Array(o-t))r.pop();scopes[qt(r)].push(a)}else if(o<t)if(n.startsWith("function")){scopes[qt(r)].pop();let t=n.split(" ").filter(Boolean);t=t[1],scopes[t]=[n,a],r.push(t)}else if(n.startsWith("if")){const t=Kt();scopes[qt(r)].pop(),scopes[qt(r)].push(t);const e=Kt();scopes[e]=[a],r.push(e),i.push(t),scopes[t]=[n,e]}else if(n.startsWith("else")){i.length||error(`invalid if block\n${n}\n${a}`,!0),scopes[qt(r)].pop();const t=Kt();r.push(t),scopes[t]=[a],scopes[qt(i)].push(n,t),n.startsWith("elseif")||i.pop()}else if(n.startsWith("while")||n.startsWith("loop")||n.startsWith("foreach")){const t=Kt();scopes[qt(r)].pop(),scopes[qt(r)].push(t),scopes[t]=[n,a],r.push(t)}else if(n.startsWith("try")){c=Kt();const t=Kt();scopes[qt(r)].pop(),scopes[qt(r)].push(c),scopes[t]=[a],scopes[c]=[n,t],r.push(t)}else if(n.startsWith("catch")){c||error(`try block not found \n ${n}\n${a}`,!0);const t=Kt();scopes[c].push(n,t),scopes[qt(r)].pop(),scopes[t]=[a],r.pop(),r.push(t),c=null}else if(n.startsWith("switch")){const t=Kt();scopes[qt(r)].pop(),scopes[qt(r)].push(t),scopes[t]=[n,a],r.push(t)}else if(n.startsWith("default")||n.startsWith("case")){const t=Kt();scopes[t]=[a],scopes[qt(r)].push(t),r.push(t)}else error(`invalid scope change\n${n}\n${a}`,!0);o=t,n=a}}}(t,oe),console.log(scopes),function(){const{breaked:t}=zt(scopes.global,scopes.vars);t&&error("invalid break statment in global scope")}(scopes.global,scopes.vars),console.log(scopes)}catch(t){log(t),log("FATAL ERROR - terminating program...")}}function oe(t){error(`cannot import file ${t} from online editor`)}globalThis.config={tab:"\t",max_loop_limit:1e3},globalThis.error=(t,e)=>{if(globalThis.enable_catch)return globalThis.currentError=t,!undefined_var;if(!e)throw`[RUNTIME ERROR] ${t}`;throw`[SYNTAX ERROR] ${t}`},globalThis.log=t=>{ne.update((e=>e+`${t}\n`))};const se=window;function ie(t,e,n={}){const r=Object.assign({tab:"\t",indentOn:/{$/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:se},n),o=r.window,s=o.document;let i,c,a=[],l=[],u=-1,f=!1;t.setAttribute("contenteditable","plaintext-only"),t.setAttribute("spellcheck",r.spellcheck?"true":"false"),t.style.outline="none",t.style.overflowWrap="break-word",t.style.overflowY="auto",t.style.whiteSpace="pre-wrap";let p=!1;e(t),"plaintext-only"!==t.contentEditable&&(p=!0),p&&t.setAttribute("contenteditable","true");const d=O((()=>{const n=b();e(t,n),y(n)}),30);let h=!1;const g=t=>!N(t)&&!T(t)&&"Meta"!==t.key&&"Control"!==t.key&&"Alt"!==t.key&&!t.key.startsWith("Arrow"),m=O((t=>{g(t)&&(w(),h=!1)}),300),$=(e,n)=>{a.push([e,n]),t.addEventListener(e,n)};function b(){const e=M(),n={start:0,end:0,dir:void 0};let{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:c}=e;if(!r||!i)throw"error1";if(r.nodeType===Node.ELEMENT_NODE){const t=s.createTextNode("");r.insertBefore(t,r.childNodes[o]),r=t,o=0}if(i.nodeType===Node.ELEMENT_NODE){const t=s.createTextNode("");i.insertBefore(t,i.childNodes[c]),i=t,c=0}return k(t,(t=>{if(t===r&&t===i)return n.start+=o,n.end+=c,n.dir=o<=c?"->":"<-","stop";if(t===r){if(n.start+=o,n.dir)return"stop";n.dir="->"}else if(t===i){if(n.end+=c,n.dir)return"stop";n.dir="<-"}t.nodeType===Node.TEXT_NODE&&("->"!=n.dir&&(n.start+=t.nodeValue.length),"<-"!=n.dir&&(n.end+=t.nodeValue.length))})),t.normalize(),n}function y(e){const n=M();let r,o,s=0,i=0;if(e.dir||(e.dir="->"),e.start<0&&(e.start=0),e.end<0&&(e.end=0),"<-"==e.dir){const{start:t,end:n}=e;e.start=n,e.end=t}let c=0;k(t,(t=>{if(t.nodeType!==Node.TEXT_NODE)return;const n=(t.nodeValue||"").length;if(c+n>e.start&&(r||(r=t,s=e.start-c),c+n>e.end))return o=t,i=e.end-c,"stop";c+=n})),r||(r=t,s=t.childNodes.length),o||(o=t,i=t.childNodes.length),"<-"==e.dir&&([r,s,o,i]=[o,i,r,s]),n.setBaseAndExtent(r,s,o,i)}function v(){const e=M().getRangeAt(0),n=s.createRange();return n.selectNodeContents(t),n.setEnd(e.startContainer,e.startOffset),n.toString()}function _(){const e=M().getRangeAt(0),n=s.createRange();return n.selectNodeContents(t),n.setStart(e.endContainer,e.endOffset),n.toString()}function x(t){if(p&&"Enter"===t.key)if(C(t),t.stopPropagation(),""==_()){W("\n ");const t=b();t.start=--t.end,y(t)}else W("\n")}function w(){if(!f)return;const e=t.innerHTML,n=b(),r=l[u];if(r&&r.html===e&&r.pos.start===n.start&&r.pos.end===n.end)return;u++,l[u]={html:e,pos:n},l.splice(u+1);u>300&&(u=300,l.splice(0,1))}function k(t,e){const n=[];t.firstChild&&n.push(t.firstChild);let r=n.pop();for(;r&&"stop"!==e(r);)r.nextSibling&&n.push(r.nextSibling),r.firstChild&&n.push(r.firstChild),r=n.pop()}function E(t){return t.metaKey||t.ctrlKey}function N(t){return E(t)&&!t.shiftKey&&"KeyZ"===t.code}function T(t){return E(t)&&t.shiftKey&&"KeyZ"===t.code}function W(t){t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),s.execCommand("insertHTML",!1,t)}function O(t,e){let n=0;return(...r)=>{clearTimeout(n),n=o.setTimeout((()=>t(...r)),e)}}function A(t){let e=t.length-1;for(;e>=0&&"\n"!==t[e];)e--;e++;let n=e;for(;n<t.length&&/[ \t]/.test(t[n]);)n++;return[t.substring(e,n)||"",e,n]}function S(){return t.textContent||""}function C(t){t.preventDefault()}function M(){var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.getSelection():o.getSelection()}return $("keydown",(e=>{e.defaultPrevented||(c=S(),r.preserveIdent?function(t){if("Enter"===t.key){const e=v(),n=_();let[o]=A(e),s=o;if(r.indentOn.test(e)&&(s+=r.tab),s.length>0?(C(t),t.stopPropagation(),W("\n"+s)):x(t),s!==o&&"}"===n[0]){const t=b();W("\n"+o),y(t)}}}(e):x(e),r.catchTab&&function(t){if("Tab"===t.key)if(C(t),t.shiftKey){const t=v();let[e,n]=A(t);if(e.length>0){const t=b(),o=Math.min(r.tab.length,e.length);y({start:n,end:n+o}),s.execCommand("delete"),t.start-=o,t.end-=o,y(t)}}else W(r.tab)}(e),r.addClosing&&function(t){const e="([{'\"",n=")]}'\"",r=_(),o=v(),s="\\"===o.substr(o.length-1),i=r.substr(0,1);if(n.includes(t.key)&&!s&&i===t.key){const e=b();C(t),e.start=++e.end,y(e)}else if(e.includes(t.key)&&!s&&("\"'".includes(t.key)||[""," ","\n"].includes(i))){C(t);const r=b(),o=r.start==r.end?"":M().toString();W(t.key+o+n[e.indexOf(t.key)]),r.start++,r.end++,y(r)}}(e),r.history&&(!function(e){if(N(e)){C(e),u--;const n=l[u];n&&(t.innerHTML=n.html,y(n.pos)),u<0&&(u=0)}if(T(e)){C(e),u++;const n=l[u];n&&(t.innerHTML=n.html,y(n.pos)),u>=l.length&&u--}}(e),g(e)&&!h&&(w(),h=!0)),p&&y(b()))})),$("keyup",(t=>{t.defaultPrevented||t.isComposing||(c!==S()&&d(),m(t),i&&i(S()))})),$("focus",(t=>{f=!0})),$("blur",(t=>{f=!1})),$("paste",(n=>{w(),function(n){C(n);const r=(n.originalEvent||n).clipboardData.getData("text/plain").replace(/\r/g,""),o=b();W(r),e(t),y({start:o.start+r.length,end:o.start+r.length})}(n),w(),i&&i(S())})),{updateOptions(t){Object.assign(r,t)},updateCode(n){t.textContent=n,e(t)},onUpdate(t){i=t},toString:S,save:b,restore:y,recordHistory:w,destroy(){for(let[e,n]of a)t.removeEventListener(e,n)}}}function ce(e){let n,r,i,c,a;return{c(){n=w("main"),r=w("div"),this.h()},l(t){n=S(t,"MAIN",{class:!0});var e=O(n);r=S(e,"DIV",{"data-gramm":!0,spellcheck:!0,class:!0}),O(r).forEach(x),e.forEach(x),this.h()},h(){W(r,"data-gramm","false"),W(r,"spellcheck","false"),W(r,"class","svelte-1vbfj1z"),W(n,"class","svelte-1vbfj1z")},m(t,o){_(t,n,o),v(n,r),c||(a=[m(i=fe.call(null,r,{code:ue,$$restProps:e[0]})),T(r,"keydown",pe)],c=!0)},p(t,[e]){i&&s(i.update)&&1&e&&i.update.call(null,{code:ue,$$restProps:t[0]})},i:t,o:t,d(t){t&&x(n),c=!1,o(a)}}}let ae=function(){const t=JSON.parse(localStorage.getItem("pipescript-code"));return t||""}(),le=!1,ue=ae;function fe(t,{code:e,autofocus:n=!0,loc:r=!0,...o}){const s=ie(t,(()=>{}),o);function i({code:t,autofocus:e=!1,loc:n=!0,...r}){s.updateOptions(r),s.updateCode(t)}return s.onUpdate((t=>ae=t)),i({code:e}),n&&t.focus(),{update:i,destroy(){s.destroy()}}}function pe({ctrlKey:t,keyCode:e}){if(le||(le=!0,setTimeout(de,2e3)),13===e)t&&re(ae.split("\n"))}function de(){le=!1,localStorage.setItem("pipescript-code",JSON.stringify(ae))}function he(t,n,r){const o=[];let s=g(n,o);return t.$$set=t=>{n=e(e({},n),h(t)),r(0,s=g(n,o))},[s]}class ge extends lt{constructor(t){super(),at(this,t,he,ce,i,{})}}function me(e){let n,r,o,s;return{c(){n=w("main"),r=w("textarea"),this.h()},l(t){n=S(t,"MAIN",{class:!0});var e=O(n);r=S(e,"TEXTAREA",{placeholder:!0,class:!0}),O(r).forEach(x),e.forEach(x),this.h()},h(){W(r,"placeholder","Console"),r.readOnly=!0,W(r,"class","svelte-q6c650"),W(n,"class","svelte-q6c650")},m(t,i){_(t,n,i),v(n,r),R(r,e[0]),o||(s=T(r,"input",e[1]),o=!0)},p(t,[e]){1&e&&R(r,t[0])},i:t,o:t,d(t){t&&x(n),o=!1,s()}}}function $e(t,e,n){let r="";return ne.subscribe((t=>{n(0,r=t)})),[r,function(){r=this.value,n(0,r)}]}class be extends lt{constructor(t){super(),at(this,t,$e,me,i,{})}}function ye(e){let n,r,s,i,c,a,l,u;return{c(){n=w("main"),r=w("a"),s=k("Home"),i=E(),c=w("a"),a=k("Editor"),this.h()},l(t){n=S(t,"MAIN",{class:!0});var e=O(n);r=S(e,"A",{href:!0,class:!0});var o=O(r);s=C(o,"Home"),o.forEach(x),i=M(e),c=S(e,"A",{href:!0,class:!0});var l=O(c);a=C(l,"Editor"),l.forEach(x),e.forEach(x),this.h()},h(){W(r,"href","/"),W(r,"class","svelte-1suob06"),W(c,"href","/editor"),W(c,"class","svelte-1suob06"),W(n,"class","svelte-1suob06")},m(t,e){_(t,n,e),v(n,r),v(r,s),v(n,i),v(n,c),v(c,a),l||(u=[m(It.call(null,r)),m(It.call(null,c))],l=!0)},p:t,i:t,o:t,d(t){t&&x(n),l=!1,o(u)}}}class ve extends lt{constructor(t){super(),at(this,t,null,ye,i,{})}}function _e(e){let n,r,o,s,i,c,a,l;return r=new ve({}),i=new ge({}),a=new be({}),{c(){n=w("main"),rt(r.$$.fragment),o=E(),s=w("section"),rt(i.$$.fragment),c=E(),rt(a.$$.fragment),this.h()},l(t){n=S(t,"MAIN",{class:!0});var e=O(n);ot(r.$$.fragment,e),o=M(e),s=S(e,"SECTION",{class:!0});var l=O(s);ot(i.$$.fragment,l),c=M(l),ot(a.$$.fragment,l),l.forEach(x),e.forEach(x),this.h()},h(){W(s,"class","svelte-uqnmep"),W(n,"class","svelte-uqnmep")},m(t,e){_(t,n,e),st(r,n,null),v(n,o),v(n,s),st(i,s,null),v(s,c),st(a,s,null),l=!0},p:t,i(t){l||(tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(a.$$.fragment,t),l=!0)},o(t){et(r.$$.fragment,t),et(i.$$.fragment,t),et(a.$$.fragment,t),l=!1},d(t){t&&x(n),it(r),it(i),it(a)}}}class xe extends lt{constructor(t){super(),at(this,t,null,_e,i,{})}}function we(e){let n,r,o,s,i,c;return r=new ve({}),{c(){n=w("main"),rt(r.$$.fragment),o=E(),s=w("h1"),i=k("Home Page"),this.h()},l(t){n=S(t,"MAIN",{class:!0});var e=O(n);ot(r.$$.fragment,e),o=M(e),s=S(e,"H1",{});var c=O(s);i=C(c,"Home Page"),c.forEach(x),e.forEach(x),this.h()},h(){W(n,"class","svelte-jdzb5c")},m(t,e){_(t,n,e),st(r,n,null),v(n,o),v(n,s),v(s,i),c=!0},p:t,i(t){c||(tt(r.$$.fragment,t),c=!0)},o(t){et(r.$$.fragment,t),c=!1},d(t){t&&x(n),it(r)}}}class ke extends lt{constructor(t){super(),at(this,t,null,we,i,{})}}function Ee(e){let n,r,o,s,i;return r=new jt({props:{path:"editor",component:xe}}),s=new jt({props:{path:"/",component:ke}}),{c(){n=w("div"),rt(r.$$.fragment),o=E(),rt(s.$$.fragment)},l(t){n=S(t,"DIV",{});var e=O(n);ot(r.$$.fragment,e),o=M(e),ot(s.$$.fragment,e),e.forEach(x)},m(t,e){_(t,n,e),st(r,n,null),v(n,o),st(s,n,null),i=!0},p:t,i(t){i||(tt(r.$$.fragment,t),tt(s.$$.fragment,t),i=!0)},o(t){et(r.$$.fragment,t),et(s.$$.fragment,t),i=!1},d(t){t&&x(n),it(r),it(s)}}}function Ne(t){let e,n;return e=new Tt({props:{url:t[0],$$slots:{default:[Ee]},$$scope:{ctx:t}}}),{c(){rt(e.$$.fragment)},l(t){ot(e.$$.fragment,t)},m(t,r){st(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.url=t[0]),2&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Te(t,e,n){let{url:r=""}=e;return t.$$set=t=>{"url"in t&&n(0,r=t.url)},[r]}return new class extends lt{constructor(t){super(),at(this,t,Te,Ne,i,{url:0})}}({target:document.body,hydrate:!0})}();
//# sourceMappingURL=bundle.js.map
